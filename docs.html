<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Документация - NightArchive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">NightArchive</a>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Главная</a></li>
                <li><a href="osint.html">OSINT</a></li>
                <li><a href="deanon.html">Деанон</a></li>
                <li><a href="tools.html">Инструменты</a></li>
                <li><a href="resources.html">Ресурсы</a></li>
                <li><a href="docs.html" class="active">Документация</a></li>
                <li><a href="about.html">О сайте</a></li>
            </ul>
            <a href="https://t.me/NightArchiveTg" target="_blank" class="nav-telegram-btn">
                <i class="fab fa-telegram-plane"></i>
                <span>Telegram</span>
            </a>
        </div>
    </nav>
    <section class="page-header">
        <h1>Техническая документация</h1>
        <p>Подробные гайды и примеры кода для разработчиков</p>
    </section>

    <main class="container has-sidebar">
        <aside class="sidebar">
            <h3>Содержание</h3>
            <ul class="toc">
                <li><a href="#getting-started">Начало работы</a></li>
                <li><a href="#api-guide">API гайды</a></li>
                <li><a href="#code-examples">Примеры кода</a></li>
                <li><a href="#bash-scripts">Bash скрипты</a></li>
                <li><a href="#python-tools">Python инструменты</a></li>
                <li><a href="#best-practices">Лучшие практики</a></li>
                <li><a href="#troubleshooting">Решение проблем</a></li>
            </ul>
        </aside>

        <article class="main-content">
            <section id="getting-started" class="section">
                <h2>Начало работы</h2>

                <h3>Требования</h3>
                <ul>
                    <li>Python 3.8+</li>
                    <li>bash/zsh (для скриптов)</li>
                    <li>curl или wget</li>
                    <li>git</li>
                    <li>Базовые знания командной строки</li>
                </ul>

                <h3>Установка зависимостей (Linux/Mac)</h3>
                <code>
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install python3 python3-pip curl git

# macOS
brew install python3 curl git

# Windows
# Используйте WSL или установите Python с python.org
                </code>


            </section>
            <section id="api-guide" class="section">
                <h2>API гайды</h2>

                <div class="api-section">
                    <h3>Google Custom Search API</h3>
                    <p><strong>Назначение:</strong> Добавить мощный поиск на ваш сайт</p>
                    <p><strong>Документация:</strong> <a href="https://developers.google.com/custom-search/v1/overview" target="_blank">developers.google.com</a></p>

                    <h4>Шаги для начала:</h4>
                    <ol>
                        <li>Создайте Google Cloud проект</li>
                        <li>Включите Custom Search API</li>
                        <li>Создайте API ключ</li>
                        <li>Создайте поисковый движок на <a href="https://cse.google.com" target="_blank">cse.google.com</a></li>
                    </ol>

                    <h4>Пример запроса</h4>
                    <code>
curl "https://www.googleapis.com/customsearch/v1" \
  -G \
  -d "q=OSINT" \
  -d "key=YOUR_API_KEY" \
  -d "cx=YOUR_SEARCH_ENGINE_ID"
                    </code>
                </div>

                <div class="api-section">
                    <h3>Shodan API</h3>
                    <p><strong>Назначение:</strong> Поиск интернет-подключенных устройств</p>
                    <p><strong>Документация:</strong> <a href="https://developer.shodan.io/" target="_blank">developer.shodan.io</a></p>

                    <h4>Получение API ключа</h4>
                    <ol>
                        <li>Зарегистрируйтесь на <a href="https://www.shodan.io" target="_blank">shodan.io</a></li>
                        <li>Перейдите в Settings > API</li>
                        <li>Скопируйте ваш API ключ</li>
                    </ol>

                    <h4>Пример на Python</h4>
                    <code>
import shodan

api = shodan.Shodan('YOUR_API_KEY')

try:
    # Поиск сервера
    results = api.search('Apache/2.4.41')
    
    print('Results found: {}'.format(results['total']))
    for result in results['matches']:
        print('IP: {}'.format(result['ip_str']))
        print('Port: {}'.format(result['port']))
        print('')
except shodan.APIError as e:
    print('Error: {}'.format(e))
                    </code>
                </div>

                <div class="api-section">
                    <h3>Twitter API</h3>
                    <p><strong>Назначение:</strong> Работа с твитами и профилями</p>
                    <p><strong>Документация:</strong> <a href="https://developer.twitter.com/" target="_blank">developer.twitter.com</a></p>

                    <h4>Пример на Python</h4>
                    <code>
import tweepy

# Аутентификация
auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
api = tweepy.API(auth)

# Поиск твитов
tweets = api.search_tweets(q="OSINT", count=10)
for tweet in tweets:
    print(tweet.text)
                    </code>
                </div>
            </section>
            <section id="code-examples" class="section">
                <h2>Примеры кода</h2>

                <div class="code-example">
                    <h3>Пример 1: Поиск email адреса</h3>
                    <code>
import re

def find_emails(text):
    """Найти все email адреса в тексте"""
    email_pattern = r'[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}'
    return re.findall(email_pattern, text)

# Использование
text = "Contact us at support@example.com or info@example.org"
emails = find_emails(text)
print(emails)  # ['support@example.com', 'info@example.org']
                    </code>
                </div>

                <div class="code-example">
                    <h3>Пример 2: Извлечение EXIF данных</h3>
                    <code>
from PIL import Image
from PIL.ExifTags import TAGS

def get_exif_data(image_path):
    """Извлечь EXIF данные из фотографии"""
    image = Image.open(image_path)
    exif_data = image._getexif()
    
    if not exif_data:
        return None
    
    exif = {}
    for tag_id, value in exif_data.items():
        tag = TAGS.get(tag_id, tag_id)
        exif[tag] = value
    
    return exif

# Использование
exif = get_exif_data('photo.jpg')
if exif:
    for key, value in exif.items():
        print(f"{key}: {value}")
                    </code>
                </div>

                <div class="code-example">
                    <h3>Пример 3: Проверка доступности сайта</h3>
                    <code>
import requests
from datetime import datetime

def check_website(url):
    """Проверить доступность и статус сайта"""
    try:
        response = requests.get(url, timeout=5)
        return {
            'url': url,
            'status': response.status_code,
            'time': datetime.now(),
            'available': response.status_code == 200
        }
    except requests.exceptions.RequestException as e:
        return {
            'url': url,
            'status': None,
            'time': datetime.now(),
            'error': str(e),
            'available': False
        }

# Использование
result = check_website('https://example.com')
print(result)
                    </code>
                </div>

                <div class="code-example">
                    <h3>Пример 4: Анализ структуры сайта</h3>
                    <code>
import requests
from bs4 import BeautifulSoup
from urllib.parse import urljoin, urlparse

def crawl_website(url, max_depth=2):
    """Простой краулер для сбора информации со страниц"""
    visited = set()
    to_visit = [url]
    results = []
    
    while to_visit and len(visited) < max_depth * 10:
        current_url = to_visit.pop(0)
        
        if current_url in visited:
            continue
        
        visited.add(current_url)
        
        try:
            response = requests.get(current_url, timeout=5)
            soup = BeautifulSoup(response.content, 'html.parser')
            
            # Извлечение ссылок
            for link in soup.find_all('a', href=True):
                href = urljoin(current_url, link['href'])
                if urlparse(href).netloc == urlparse(url).netloc:
                    if href not in visited:
                        to_visit.append(href)
            
            results.append({
                'url': current_url,
                'title': soup.title.string if soup.title else 'No title',
                'links_count': len(soup.find_all('a'))
            })
        except Exception as e:
            print(f"Error crawling {current_url}: {e}")
    
    return results

# Использование
results = crawl_website('https://example.com', max_depth=2)
for result in results:
    print(result)
                    </code>
                </div>
            </section>
            <section id="bash-scripts" class="section">
                <h2>Bash скрипты</h2>

                <div class="bash-script">
                    <h3>Скрипт 1: Сбор информации о домене</h3>
                    <code>
#!/bin/bash

# domain_info.sh - Сбор информации о домене

domain=$1

if [ -z "$domain" ]; then
    echo "Usage: $0 domain.com"
    exit 1
fi

echo "=== Информация о домене: $domain ==="

# WHOIS информация
echo -e "\n[WHOIS]"
whois $domain | head -20

# DNS записи
echo -e "\n[DNS A records]"
nslookup $domain

# MX записи
echo -e "\n[MX records]"
dig +short mx $domain

# NS записи
echo -e "\n[NS records]"
dig +short ns $domain

# TXT записи
echo -e "\n[TXT records]"
dig +short txt $domain

# HTTP заголовки
echo -e "\n[HTTP Headers]"
curl -I https://$domain 2>/dev/null | head -10

echo -e "\n=== Завершено ==="
                    </code>
                </div>

                <div class="bash-script">
                    <h3>Скрипт 2: Сканирование портов</h3>
                    <code>
#!/bin/bash

# port_scan.sh - Сканирование открытых портов

target=$1
port_start=${2:-1}
port_end=${3:-1000}

if [ -z "$target" ]; then
    echo "Usage: $0 target [start_port] [end_port]"
    exit 1
fi

echo "Сканирование портов на $target (порты $port_start-$port_end)"

for port in $(seq $port_start $port_end); do
    timeout 0.1 bash -c "echo >/dev/tcp/$target/$port" 2>/dev/null && \
    echo "Port $port: OPEN"
done

echo "Сканирование завершено"
                    </code>
                </div>

                <div class="bash-script">
                    <h3>Скрипт 3: Мониторинг файлов</h3>
                    <code>
#!/bin/bash

# file_monitor.sh - Мониторинг изменений файла

file=$1
check_interval=${2:-5}

if [ -z "$file" ]; then
    echo "Usage: $0 file [interval_seconds]"
    exit 1
fi

prev_hash=""

echo "Мониторинг файла: $file"

while true; do
    current_hash=$(md5sum "$file" 2>/dev/null | cut -d' ' -f1)
    
    if [ "$prev_hash" != "$current_hash" ]; then
        echo "[$(date +'%Y-%m-%d %H:%M:%S')] Файл изменен!"
        prev_hash=$current_hash
    fi
    
    sleep $check_interval
done
                    </code>
                </div>
            </section>
            <section id="python-tools" class="section">
                <h2>Python инструменты</h2>

                <h3>Создание вашего первого инструмента</h3>

                <div class="python-tool">
                    <h4>requirements.txt</h4>
                    <code>
requests==2.31.0
beautifulsoup4==4.12.0
pillow==10.0.0
shodan==1.30.0
tweepy==4.14.0
python-dotenv==1.0.0
                    </code>
                </div>

                <div class="python-tool">
                    <h4>osint_tool.py</h4>
                    <code>
#!/usr/bin/env python3

import requests
import argparse
from bs4 import BeautifulSoup
import json

class OSINTTool:
    def __init__(self):
        self.session = requests.Session()
    
    def get_website_info(self, url):
        """Получить базовую информацию о сайте"""
        try:
            response = self.session.get(url, timeout=5)
            soup = BeautifulSoup(response.content, 'html.parser')
            
            info = {
                'url': url,
                'status_code': response.status_code,
                'title': soup.title.string if soup.title else None,
                'meta_description': None,
                'links_count': len(soup.find_all('a')),
                'scripts': len(soup.find_all('script')),
                'forms': len(soup.find_all('form'))
            }
            
            # Метаданные
            for meta in soup.find_all('meta'):
                if meta.get('name') == 'description':
                    info['meta_description'] = meta.get('content')
            
            return info
        except Exception as e:
            return {'error': str(e)}
    
    def check_email_validity(self, email):
        """Простая проверка email"""
        import re
        pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        return bool(re.match(pattern, email))

def main():
    parser = argparse.ArgumentParser(description='OSINT Tool')
    parser.add_argument('--url', help='Анализировать URL')
    parser.add_argument('--email', help='Проверить email')
    
    args = parser.parse_args()
    tool = OSINTTool()
    
    if args.url:
        info = tool.get_website_info(args.url)
        print(json.dumps(info, indent=2, ensure_ascii=False))
    
    elif args.email:
        valid = tool.check_email_validity(args.email)
        print(f"Email {args.email}: {'Valid' if valid else 'Invalid'}")

if __name__ == '__main__':
    main()
                    </code>
                </div>

                <h3>Использование</h3>
                <code>
python3 osint_tool.py --url https://example.com
python3 osint_tool.py --email test@example.com
                </code>
            </section>
            <section id="best-practices" class="section">
                <h2>Лучшие практики</h2>

                <div class="practice">
                    <h3>1. Управление API ключами</h3>
                    <p><strong>Никогда</strong> не размещайте API ключи в коде!</p>
                    <code>
# .env файл
SHODAN_API_KEY=xxxxxxxxxxxxxxxx
TWITTER_API_KEY=yyyyyyyyyyyyyy

# Python код
from dotenv import load_dotenv
import os

load_dotenv()
api_key = os.getenv('SHODAN_API_KEY')
                    </code>
                </div>

                <div class="practice">
                    <h3>2. Обработка ошибок</h3>
                    <code>
try:
    response = requests.get(url, timeout=5)
    response.raise_for_status()
except requests.exceptions.Timeout:
    print("Timeout: сервер не ответил")
except requests.exceptions.ConnectionError:
    print("Connection error: нет интернета")
except requests.exceptions.HTTPError as e:
    print(f"HTTP error: {e}")
except Exception as e:
    print(f"Unexpected error: {e}")
                    </code>
                </div>

                <div class="practice">
                    <h3>3. Rate limiting</h3>
                    <code>
import time

def rate_limited_request(urls, delay=1):
    """Запросы с задержкой между ними"""
    for url in urls:
        try:
            response = requests.get(url, timeout=5)
            yield response
        except Exception as e:
            print(f"Error: {e}")
        finally:
            time.sleep(delay)

# Использование
for response in rate_limited_request(url_list, delay=2):
    print(response.status_code)
                    </code>
                </div>

                <div class="practice">
                    <h3>4. Логирование</h3>
                    <code>
import logging

# Настройка логирования
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('app.log'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)

logger.info("Приложение запущено")
logger.warning("Предупреждение")
logger.error("Ошибка произошла")
                    </code>
                </div>
            </section>
            <section id="troubleshooting" class="section">
                <h2>Решение проблем</h2>

                <div class="troubleshooting-item">
                    <h3>Проблема: SSL Certificate Error</h3>
                    <p><strong>Ошибка:</strong> SSLError: certificate verify failed</p>
                    <p><strong>Решение:</strong></p>
                    <code>
# Не рекомендуется! Используйте для отладки
import requests
requests.get(url, verify=False)

# Правильное решение: обновите сертификаты
# macOS
/Applications/Python\ 3.x/Install\ Certificates.command

# Linux
pip install --upgrade certifi
                    </code>
                </div>

                <div class="troubleshooting-item">
                    <h3>Проблема: Module not found</h3>
                    <p><strong>Ошибка:</strong> ModuleNotFoundError: No module named 'requests'</p>
                    <p><strong>Решение:</strong></p>
                    <code>
# Установите зависимости
pip install requests

# Или все зависимости сразу
pip install -r requirements.txt

# Проверьте версию Python
python3 --version
                    </code>
                </div>

                <div class="troubleshooting-item">
                    <h3>Проблема: Rate limiting</h3>
                    <p><strong>Ошибка:</strong> 429 Too Many Requests</p>
                    <p><strong>Решение:</strong></p>
                    <code>
import time
import random

def retry_with_backoff(func, max_retries=3):
    for attempt in range(max_retries):
        try:
            return func()
        except Exception as e:
            if attempt < max_retries - 1:
                wait_time = 2 ** attempt + random.random()
                print(f"Retry in {wait_time:.1f}s...")
                time.sleep(wait_time)
            else:
                raise e
                    </code>
                </div>

                <div class="troubleshooting-item">
                    <h3>Проблема: Encoding issues</h3>
                    <p><strong>Ошибка:</strong> UnicodeDecodeError</p>
                    <p><strong>Решение:</strong></p>
                    <code>
# При работе с файлами
with open('file.txt', 'r', encoding='utf-8') as f:
    content = f.read()

# При работе с веб-контентом
response = requests.get(url)
response.encoding = 'utf-8'  # Установить кодировку
text = response.text
                    </code>
                </div>
            </section>
        </article>
    </main>
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 NightArchive. Все права защищены.</p>
            <p>Все примеры кода предоставляются как есть для образовательных целей.</p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('code').forEach(function(codeBlock) {
                if (!codeBlock.closest('h1, h2, h3, h4, h5, h6, p, a')) {
                    hljs.highlightElement(codeBlock);
                    if (codeBlock.textContent.trim()) {
                        const wrapper = document.createElement('div');
                        wrapper.className = 'code-block-wrapper';
                        codeBlock.parentNode.insertBefore(wrapper, codeBlock);
                        wrapper.appendChild(codeBlock);
                        const copyBtn = document.createElement('button');
                        copyBtn.className = 'code-copy-btn';
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i> Копировать';
                        copyBtn.addEventListener('click', function() {
                            const text = codeBlock.innerText;
                            navigator.clipboard.writeText(text).then(function() {
                                copyBtn.innerHTML = '<i class="fas fa-check"></i> Скопировано!';
                                copyBtn.classList.add('copied');
                                setTimeout(function() {
                                    copyBtn.innerHTML = '<i class="fas fa-copy"></i> Копировать';
                                    copyBtn.classList.remove('copied');
                                }, 2000);
                            }).catch(function() {
                                const textarea = document.createElement('textarea');
                                textarea.value = text;
                                document.body.appendChild(textarea);
                                textarea.select();
                                document.execCommand('copy');
                                document.body.removeChild(textarea);
                                copyBtn.innerHTML = '<i class="fas fa-check"></i> Скопировано!';
                                copyBtn.classList.add('copied');
                                setTimeout(function() {
                                    copyBtn.innerHTML = '<i class="fas fa-copy"></i> Копировать';
                                    copyBtn.classList.remove('copied');
                                }, 2000);
                            });
                        });
                        wrapper.appendChild(copyBtn);
                    }
                }
            });
        });
    </script>
</body>
</html>
